<!DOCTYPE html>
<html>

<head>
    <style>
        .gameArea {
            display: flex;
            flex-direction: row;
            background-color: aquamarine;
        }

        .gamePiece {
            background-color: white;
            border: 2px solid black;
            border-radius: 5px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            cursor: move;
            width: 35px;
            height: 35px;
            margin: 7px;
            touch-action: none;
            /* user-select: none; */
        }

        .gamePiece:hover {
            background-color: pink;
            cursor: move;
        }

        .wrong {
            background-color: red;
        }
    </style>
    <title>Take Ten Game</title>
</head>

<body>
    <div id="bodyCell">
        <div class="gameArea"></div>
    </div>
    <script>
        // Game table will be 6 columns by 20 rows,
        // each column with 20 random numbers between 1 and 9
        let table = [
            column0 = Array.from({ length: 2 }, () => Math.floor(Math.random() * 9) + 1),
            column1 = Array.from({ length: 2 }, () => Math.floor(Math.random() * 9) + 1)
        ];

        let html = '';
        // Loop the outer array to build the columns
        for (let i = 0; i < table.length; i++) {
            let columnLength = table[i].length;
            html += '<div class="column" id="column-' + i + '">';
            for (let j = 0; j < columnLength; j++) {
                html += '<div draggable="true" class="gamePiece" id="' + i + '-' + j + '">' + table[i][j] + '</div>';
            }
            html += '</div>';
        }

        // Put the pieces into the game area on the HTML pageconst html: string = "<div>Hello, <strong>world!</strong></div>";
        const gameArea = document.getElementsByClassName("gameArea")[0];
        gameArea.innerHTML = html;

        // Set the touch start coordinates
        let touchStartX = 0;
        let touchStartY = 0;

        function dragging(event) {
            // Prevent default touch action (such as scrolling) on the element
            event.preventDefault();

            // updating the CSS while dragging
            event.target.style.position = 'absolute';
            event.target.style.zIndex = '1000';

            // Your code to handle the touchmove event goes here
            var deltaX = event.changedTouches[0].pageX - touchStartX;
            var deltaY = event.changedTouches[0].pageY - touchStartY;
            
            var d = event.target.style.left
            console.log('Current left style:', event.target.style.left);
            // console.log('Current top style:', event.target.style.top);
            console.log('Current left offset:', event.target.offsetLeft);
            // console.log('Current top offset:', event.target.offsetTop);
            console.log('New left delta:', deltaX);
            // console.log('New top delta:', deltaY);
            console.log('New left offset style:', (event.target.offsetLeft + Math.abs(deltaX)) + 'px');
            // console.log('New top offset style:', event.target.offsetTop + deltaY + 'px');

            event.target.style.left = (event.target.offsetLeft + deltaX) + 'px';
            event.target.style.top = (event.target.offsetTop + deltaY) + 'px';
            
            console.log('New offsetLeft:', event.target.offsetLeft);
            // console.log('New offsetTop:', event.target.offsetTop);
            console.log('Actual Delta:', d - event.target.style.left);
            // console.log('New offsetTop:', event.target.offsetTop);
            
            // Reset start-position for next frame/iteration
            touchStartX = event.changedTouches[0].pageX;
            touchStartY = event.changedTouches[0].pageY;
        }

        function dragEnd(event) {
            // Prevent default touch action (such as scrolling) on the element
            event.preventDefault();
            // Your code to handle the touchend event goes here
        }

        function handleTouchStart(event) {
            // Prevent default touch action (such as scrolling) on the element
            event.preventDefault();

            // Get the starting coordinates of the touch
            touchStartX = event.changedTouches[0].pageX;
            touchStartY = event.changedTouches[0].pageY;
        }

        const element = document.getElementById("0-0");
        // Add event listeners for touch events
        element.addEventListener("touchstart", handleTouchStart);
        element.addEventListener("touchend", dragEnd);
        element.addEventListener("touchmove", dragging);

        let currentDroppable = null;
    </script>
</body>

</html>